<!-- Bootstrap Bundle JS -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
  crossorigin="anonymous"
></script>

<!-- Theme toggle script -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.getElementById("themeToggle");
    const userTheme = localStorage.getItem("theme");
    const body = document.body;
    const navbar = document.querySelector(".navbar-custom");

    function applyTheme(theme) {
      if (theme === "dark") {
        body.classList.add("dark-mode");
        body.classList.remove("light-mode");
        navbar?.classList.add("dark-mode");
        navbar?.classList.remove("light-mode");
        toggle?.querySelector("i")?.classList.replace("bi-moon-stars", "bi-brightness-high");
      } else {
        body.classList.add("light-mode");
        body.classList.remove("dark-mode");
        navbar?.classList.add("light-mode");
        navbar?.classList.remove("dark-mode");
        toggle?.querySelector("i")?.classList.replace("bi-brightness-high", "bi-moon-stars");
      }
    }

    applyTheme(userTheme || "light");

    toggle?.addEventListener("click", () => {
      const newTheme = body.classList.contains("light-mode") ? "dark" : "light";
      localStorage.setItem("theme", newTheme);
      applyTheme(newTheme);
    });

    // Optional: Disable submit buttons after first click on any form
    const forms = document.querySelectorAll("form");
    forms.forEach(form => {
      const submitBtn = form.querySelector("button[type='submit']");
      if (submitBtn) {
        form.addEventListener("submit", () => {
          submitBtn.disabled = true;
          submitBtn.innerText = "Submitting...";
        });
      }
    });
  });
</script>
